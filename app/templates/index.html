{% extends "base.html" %}
{% block head %}
    {{ super() }}
  <style>
    /*Load local fonts*/
    {% for font in local_fonts %}
      @font-face{
        font-family: {{ font.cssname }};
        src: url('{{ font.path }}');
      }
    {% endfor %}

    /*Load remote fonts*/
    {% for font in remote_fonts %}
      @font-face{
        font-family: {{ font.cssname }};
        src: url('{{ font.path }}');
      }
    {% endfor %}

    /*Create classes for local fonts*/
    {% for font in local_fonts %}
      .{{ font.cssname }}{
        font-family: {{ font.cssname }};
      }
    {% endfor %}

    /*Create classes for remote_fonts*/
    {% for font in remote_fonts %}
      .{{ font.cssname }}{
        font-family: {{ font.cssname }};
      }
    {% endfor %}
  </style>
{% endblock %}

{% block content %}
  <meta id="to_local_fonts" data-name="local-fonts" data-str="{{ to_local_fonts }}">
  <meta id="to_remote_fonts" data-name="remote-fonts" data-str="{{ to_remote_fonts }}">

  <div id="page-vertical-metrics" class="pages">
    {% for font in local_fonts %}
      <h2><a href="#{{ font.fullname }}-vert">{{ font.fullname }}</a></h2>
    {% endfor %}

    <div id="container-left">
      <h2>Local</h2>
      {% for font in local_fonts %}
        <div class="box-200px">
          <div class="box-header" id="{{ font.fullname }}-vert">{{ font.fullname }}</div>
          <div class="box-content">
            <span class="{{ font.cssname }}" style="font-size: 20px;" contenteditable="true">{{ dummy_text }}</span>
          </div>
        </div>
      {% endfor %}
    </div>

    <div id="container-right">
      <h2>fonts.google.com</h2>
      {% for font in remote_fonts %}
        <div class="box-200px">
          <div class="box-header">{{ font.cssname }}</div>
          <div class="box-content">
            <span class="{{ font.cssname }}" style="font-size: 20px;" contenteditable="true">{{ dummy_text }}</span>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>

  <div id="page-glyph-modified" class="pages">
    {% for font in local_fonts %}
      <h2><a href="#{{ font.fullname }}-modified">{{ font.fullname }}</a></h2>
    {% endfor %}

    {% for font in remote_fonts %}
      <div class="box-large">
        <div class="box-header" id="{{ font.fullname }}-modified">{{ font.fullname }}</div>
        <div class="box-content">
          {% for uni, name in changed_glyphs[font.fullname] %}
          <div class="font-swap">
            <div class="box-char">
              <span class="{{ font.cssname }}" style="font-size: 80px">&#{{ uni }};</span>
              <div class="caption">{{ name }}</div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    {% endfor %}
  </div>

  <div id="page-glyph-new" class="pages">
    {% for font in local_fonts %}
      <h2><a href="#{{ font.fullname }}-new">{{ font.fullname }}</a></h2>
    {% endfor %}

    {% for font in remote_fonts %}
      <div class="box-large">
        <div class="box-header" id="{{ font.fullname }}-new">{{ font.fullname }}</div>
        <div class="box-content">
          {% for uni, name in new_glyphs[font.fullname] %}
          <div class="font-swap">
            <div class="box-char">
              <span class="{{ font.cssname }}" style="font-size: 80px">&#{{ uni }};</span>
              <div class="caption">{{ name }}</div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    {% endfor %}
  </div>

  <div id="page-glyph-missing" class="pages">
    {% for font in local_fonts %}
      <h2><a href="#{{ font.fullname }}-new">{{ font.fullname }}</a></h2>
    {% endfor %}

    {% for font in remote_fonts %}
      <div class="box-large">
        <div class="box-header" id="{{ font.fullname }}-new">{{ font.fullname }}</div>
        <div class="box-content">
          {% for uni, name in missing_glyphs[font.fullname] %}
          <div class="font-swap">
            <div class="box-char">
              <span class="{{ font.cssname }}" style="font-size: 80px">&#{{ uni }};</span>
              <div class="caption">{{ name }}</div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    {% endfor %}
  </div>

  <div id="page-waterfall" class="pages">
    {% for font in local_fonts %}
      <h2><a href="#{{ font.fullname }}-waterfall">{{ font.fullname }}</a></h2>
    {% endfor %}

    {% for font in local_fonts %}
    <div class="box-large">
      <div class="box-header" id="{{ font.fullname }}-waterfall">{{ font.fullname }}</div>
      <div class="box-content">
        <div class='font-swap'>
          {% for n in range(7, 22) %}
          <div class="box-header">{{ n }}pt</div>
          <span class="{{ font.cssname }}" style="font-size: {{ n }}pt">
            QUICK WAFTING ZEPHYRS VEX BOLD JIM.<br>
            quick wafting zephyrs vex bold jim.<br>
            $14.95<br>
            <br>
          </span>
          {% endfor %}
        </div>
      </div>
    </div>
    {% endfor %}
  </div>

  <div id="page-languages" class="pages">
    {% for font in local_fonts %}
      <h2><a href="#{{ font.fullname }}-waterfall">{{ font.fullname }}</a></h2>
    {% endfor %}

    {% for font in local_fonts %}
    <div class="box-large">
      <div class="box-header" id="{{ font.fullname }}-langages">{{ font.fullname }}</div>
      <div class="box-content">
        <div class='font-swap'>
          <span class="{{ font.cssname }}">
            {% for lang in languages[font.fullname] %}
              <div class="box-header" lang="{{ languages[font.fullname][lang].part1 }}">{{ languages[font.fullname][lang].name }}</div>
              {{ languages[font.fullname][lang].text }}<br><br>
            {% endfor %}
          </span>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>

  </div>
  <div id="alert"></div>

<script>
  local = $('#to_local_fonts').data();
  local_fonts = local['str'].split(',') 

  remote = $('#to_remote_fonts').data();
  remote_fonts = remote['str'].split(',');

  // Change font with Q or D
  $(document).keypress(function(e) {
    if(e.which == 81) {
      for (i in local_fonts) {
        $('.font-swap ' + '.' + local_fonts[i]).attr('class', remote_fonts[i])
        $('#alert').show().text('fonts.google.com')
        console.log('changed to google version');
        // $('.box-char').css('font-family', 'times');
      }
    }
    if(e.which == 68) {
      for (i in remote_fonts) {
        $('.font-swap ' + '.' + remote_fonts[i]).attr('class', local_fonts[i])
        $('#alert').show().text('Local')
        console.log('changed to local version');
        // $('.box-char').css('font-family', 'times');
      }
    }
  });

  $('.container-button').on('click', function() {
    $('.pages').hide();
    $('#alert').hide();
    var page = '#' + $(this).data('page')
    $(page).show()

  })
</script>
{% endblock %}