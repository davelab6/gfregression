{% extends "base.html" %}
{% block head %}
    {{ super() }}
  <style>
    /*Load local fonts*/
    {% for font in target_fonts %}
      @font-face{
        font-family: {{ font.cssname }};
        src: url('{{ font.csspath }}');
      }
    {% endfor %}

    /*Load remote fonts*/
    {% for font in base_fonts %}
      @font-face{
        font-family: {{ font.cssname }};
        src: url('{{ font.csspath }}');
      }
    {% endfor %}

    /*Create classes for local fonts*/
    {% for font in target_fonts %}
      .{{ font.cssname }}{
        font-family: {{ font.cssname }};
      }
    {% endfor %}

    /*Create classes for base_fonts*/
    {% for font in base_fonts %}
      .{{ font.cssname }}{
        font-family: {{ font.cssname }};
      }
    {% endfor %}
  </style>
{% endblock %}

{% block content %}
  <meta id="to_target_fonts" data-name="local-fonts" data-str="{{ to_target_fonts }}">
  <meta id="to_base_fonts" data-name="remote-fonts" data-str="{{ to_base_fonts }}">

  {% include "page-vertical-metrics.html" %}
  {% include "page-glyphs-modified.html" %}
  {% include "page-glyphs-new.html" %}
  {% include "page-glyphs-missing.html" %}
  {% include "page-waterfall.html" %}
  {% include "page-languages.html" %}
  {% include "page-editor.html" %}

<script>
  local = $('#to_target_fonts').data();
  target_fonts = local['str'].split(',') 

  remote = $('#to_base_fonts').data();
  base_fonts = remote['str'].split(',');

  $('#info-button').on('click', function(){
    $('#info').toggle();
    $('.dropdown').hide();
  })
  ee = true;
  $('#font-toggle-button').on('click', function(){
    if(ee == true) {
      for (i in base_fonts) {
        $('.font-swap ' + '.' + base_fonts[i]).attr('class', target_fonts[i])
        $('.box-header > p').each(function() {
            text = $(this).text();
            $(this).text(text.replace('Base', 'Target'));

        })
        console.log('changed to target');
      }
      ee = false;
    } else {
      for (i in target_fonts) {
        $('.font-swap ' + '.' + target_fonts[i]).attr('class', base_fonts[i])
        $('.box-header > p').each(function() {
            text = $(this).text();
            $(this).text(text.replace('Target', 'Base'));
        })
        console.log('changed to base');
      }
      ee = true;
    }
    $('.dropdown').hide();
  })


  $('.container-button').on('click', function() {
    $('.pages').hide();
    $('.info').hide();
    var page = '#' + $(this).data('page')
    var infopanel = '#' + $(this).data('info')
    $(page).show()
    $(infopanel).show()
  })

  // Editor slider toggle
  $('[id*=sl]').on('input', function(){
    text_box = $(this).prop('id').replace("sl", "textbox");
    text_size = $(this).prop('id').replace("sl", "textsize");
    $('#' + text_box).css('font-size', $(this)[0].value + 'px');
    $('#' + text_size).html($(this)[0].value + 'px');
  })

  $('[id*=hide]').on('click', function(){
    text_box = $(this).prop('id').replace("hide", "textbox");
    $('#' + text_box).toggle();
    if ($(this).text() == 'remove_circle_outline') {
      $(this).html("add_circle_outline");
    } else {
      $(this).html("remove_circle_outline")
    }

  })

</script>
{% endblock %}


